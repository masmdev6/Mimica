<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Charades â€“ Create Category</title>

  <style>
    body {
      margin: 0;
      padding: 0;
      background: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      padding-top: 40px;
    }

    .container {
      width: 90%;
      max-width: 450px;
      background: #1b1b1b;
      padding: 25px;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(255, 255, 0, 0.2);
      position: relative;
    }

    .close-btn {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 22px;
      cursor: pointer;
      color: #fff;
      background: #333;
      padding: 6px 12px;
      border-radius: 8px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #ffd000;
    }

    label {
      font-size: 16px;
      margin-bottom: 5px;
      display: block;
    }

    input, textarea, select {
      width: 100%;
      padding: 12px;
      margin-bottom: 20px;
      border-radius: 10px;
      border: none;
      font-size: 16px;
      outline: none;
      background: #292929;
      color: #fff;
    }

    button {
      width: 100%;
      padding: 14px;
      margin-top: 10px;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
    }

    .generate { background: #ffd000; color: #000; }
    .copy { background: #444; color: #fff; }

    .outputBox {
      background: #222;
      padding: 12px;
      border-radius: 10px;
      margin-top: 15px;
      font-size: 14px;
      word-wrap: break-word;
    }
  </style>
</head>

<body>

  <div class="container">

    <div class="close-btn" onclick="location.href='index.html'">âœ–</div>

    <h1>Create Category</h1>

    <label>Category Title</label>
    <input id="titleInput" placeholder="Ex: Animals" />

    <label>Language / Country</label>
    <select id="countryInput">
      <option value="us">ğŸ‡ºğŸ‡¸ English (US)</option>
      <option value="uk">ğŸ‡¬ğŸ‡§ English (UK)</option>
      <option value="pt">ğŸ‡µğŸ‡¹ Portuguese (Portugal)</option>
      <option value="br">ğŸ‡§ğŸ‡· Portuguese (Brazil)</option>
      <option value="es">ğŸ‡ªğŸ‡¸ Spanish</option>
      <option value="fr">ğŸ‡«ğŸ‡· French</option>
      <option value="de">ğŸ‡©ğŸ‡ª German</option>
      <option value="it">ğŸ‡®ğŸ‡¹ Italian</option>
      <option value="jp">ğŸ‡¯ğŸ‡µ Japanese</option>
      <option value="kr">ğŸ‡°ğŸ‡· Korean</option>
      <option value="cn">ğŸ‡¨ğŸ‡³ Chinese</option>

      <option value="mx">ğŸ‡²ğŸ‡½ Mexico</option>
      <option value="ar">ğŸ‡¦ğŸ‡· Argentina</option>
      <option value="cl">ğŸ‡¨ğŸ‡± Chile</option>
      <option value="co">ğŸ‡¨ğŸ‡´ Colombia</option>

      <option value="ca">ğŸ‡¨ğŸ‡¦ Canada</option>
      <option value="au">ğŸ‡¦ğŸ‡º Australia</option>
      <option value="nz">ğŸ‡³ğŸ‡¿ New Zealand</option>

      <option value="in">ğŸ‡®ğŸ‡³ India</option>
      <option value="ru">ğŸ‡·ğŸ‡º Russia</option>
      <option value="ua">ğŸ‡ºğŸ‡¦ Ukraine</option>
      <option value="pl">ğŸ‡µğŸ‡± Poland</option>

      <option value="se">ğŸ‡¸ğŸ‡ª Sweden</option>
      <option value="no">ğŸ‡³ğŸ‡´ Norway</option>
      <option value="fi">ğŸ‡«ğŸ‡® Finland</option>
      <option value="dk">ğŸ‡©ğŸ‡° Denmark</option>

      <option value="nl">ğŸ‡³ğŸ‡± Netherlands</option>
      <option value="be">ğŸ‡§ğŸ‡ª Belgium</option>
      <option value="ch">ğŸ‡¨ğŸ‡­ Switzerland</option>
      <option value="at">ğŸ‡¦ğŸ‡¹ Austria</option>

      <option value="gr">ğŸ‡¬ğŸ‡· Greece</option>
      <option value="tr">ğŸ‡¹ğŸ‡· Turkey</option>
      <option value="il">ğŸ‡®ğŸ‡± Israel</option>

      <option value="eg">ğŸ‡ªğŸ‡¬ Egypt</option>
      <option value="za">ğŸ‡¿ğŸ‡¦ South Africa</option>
      <option value="ng">ğŸ‡³ğŸ‡¬ Nigeria</option>

      <option value="sa">ğŸ‡¸ğŸ‡¦ Saudi Arabia</option>
      <option value="ae">ğŸ‡¦ğŸ‡ª UAE</option>
      <option value="qa">ğŸ‡¶ğŸ‡¦ Qatar</option>

      <option value="sg">ğŸ‡¸ğŸ‡¬ Singapore</option>
      <option value="th">ğŸ‡¹ğŸ‡­ Thailand</option>
      <option value="ph">ğŸ‡µğŸ‡­ Philippines</option>
      <option value="id">ğŸ‡®ğŸ‡© Indonesia</option>
      <option value="my">ğŸ‡²ğŸ‡¾ Malaysia</option>
      <option value="vn">ğŸ‡»ğŸ‡³ Vietnam</option>
      <option value="kp">ğŸ‡°ğŸ‡µ North Korea</option>

      <option value="ro">ğŸ‡·ğŸ‡´ Romania</option>
      <option value="hu">ğŸ‡­ğŸ‡º Hungary</option>
      <option value="cz">ğŸ‡¨ğŸ‡¿ Czech Republic</option>
      <option value="sk">ğŸ‡¸ğŸ‡° Slovakia</option>
      <option value="si">ğŸ‡¸ğŸ‡® Slovenia</option>
      <option value="hr">ğŸ‡­ğŸ‡· Croatia</option>
      <option value="bg">ğŸ‡§ğŸ‡¬ Bulgaria</option>

      <option value="ie">ğŸ‡®ğŸ‡ª Ireland</option>
      <option value="is">ğŸ‡®ğŸ‡¸ Iceland</option>
    </select>

    <label>Words (1 per line)</label>
    <textarea id="wordsInput" rows="6" placeholder="Dog&#10;Cat&#10;Elephant"></textarea>

    <button class="generate" onclick="generateAndSave()">Generate + Save</button>
    <button class="copy" onclick="copyLink()">Copy Link</button>

    <div id="output" class="outputBox">Your generated link will appear here...</div>
  </div>

<!-- FIREBASE -->
<script type="module">
  import { initializeApp }
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";

  import { 
    getFirestore, collection, addDoc 
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBCgS8YQfKPE62k9zD-CO9Joha7pUmPQec",
    authDomain: "mimica-app-2025.firebaseapp.com",
    projectId: "mimica-app-2025",
    storageBucket: "mimica-app-2025.firebasestorage.app",
    messagingSenderId: "1077146397483",
    appId: "1:1077146397483:web:140f0b56e976899d51736e"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // ---------------------------------------
  // GENERATE LINK
  // ---------------------------------------
  function generateLink() {
    const title = document.getElementById('titleInput').value.trim();
    const rawWords = document.getElementById('wordsInput').value.trim();
    const country = document.getElementById('countryInput').value;

    if (!title || !rawWords) {
      document.getElementById('output').innerText = "Please fill in all fields!";
      return null;
    }

    const wordsList = rawWords
      .split("\n")
      .map(w => w.trim())
      .filter(w => w.length > 0);

    const encodedWords = wordsList.join(";");

    const link =
      `charades://share?title=${encodeURIComponent(title)}&words=${encodeURIComponent(encodedWords)}`;

    document.getElementById('output').innerText = link;

    return { title, wordsList, link, country };
  }

  // ---------------------------------------
  // SAVE TO FIREBASE
  // ---------------------------------------
  async function generateAndSave() {
    const result = generateLink();
    if (!result) return;

    await addDoc(collection(db, "categories"), {
      title: result.title,
      words: result.wordsList,
      country: result.country,
      createdAt: Date.now()
    });

    alert("Category saved online!");
  }

  // ---------------------------------------
  // COPY LINK BUTTON
  // ---------------------------------------
  function copyLink() {
    const text = document.getElementById('output').innerText;
    navigator.clipboard.writeText(text).then(() => {
      alert("Link copied!");
    });
  }

  // expose functions globally
  window.generateAndSave = generateAndSave;
  window.copyLink = copyLink;

</script>

</body>
</html>
